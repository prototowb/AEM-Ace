import{d as U,c as o,a as t,w as q,k as M,F as I,r as B,t as i,j as Y,b as c,i as L,n as x,e as d,f as y,h as n}from"./runtime-dom.esm-bundler.CzleRXFB.js";import{_ as E}from"./_plugin-vue_export-helper.DlAUqK2U.js";const R=U({__name:"QuizApp",props:{questions:{default:()=>[]},categories:{}},setup(j,{expose:s}){s();const h=j,e=d(!1),A=d(!1),u=d(0),l=d([]),r=d([]),_=d(0),g=d([]),w=d(""),z=d(""),P=d(10),f=d([]),k=d(!1),D=y(()=>f.value[u.value]),N=y(()=>l.value.length>0&&b.value),b=d(!1),S=y(()=>r.value.filter((a,m)=>{const v=f.value[m];if(!v)return!1;const Q=new Set(v.correctAnswers),p=new Set(a);return Q.size===p.size&&[...Q].every(F=>p.has(F))}).length),V=y(()=>f.value.length-S.value),C=y(()=>S.value/f.value.length*100),O=y(()=>g.value.length>0?g.value.reduce((a,m)=>a+m,0)/g.value.length:0),T={props:h,isQuizStarted:e,isQuizComplete:A,currentQuestionIndex:u,selectedAnswers:l,userAnswers:r,startTime:_,questionTimes:g,selectedCategory:w,selectedDifficulty:z,numberOfQuestions:P,quizQuestions:f,loading:k,currentQuestion:D,isAnswered:N,hasSubmittedAnswer:b,correctAnswers:S,incorrectAnswers:V,scorePercentage:C,averageTime:O,startQuiz:async()=>{k.value=!0;let a=[];if(h.questions&&h.questions.length>0)a=[...h.questions];else try{const v=new URLSearchParams;v.set("limit","50"),w.value&&v.set("categoryId",w.value);const Q=await fetch(`/api/questions?${v.toString()}`);if(Q.ok){const p=await Q.json();a=Array.isArray(p?.items)?p.items:[]}}catch{}w.value&&(a=a.filter(v=>v.category._id===w.value)),z.value&&(a=a.filter(v=>v.difficulty===z.value));const m=a.sort(()=>Math.random()-.5);if(f.value=m.slice(0,Math.min(Number(P.value),m.length)),f.value.length===0){alert("No questions available for the selected criteria. Please try different settings."),k.value=!1;return}u.value=0,l.value=[],r.value=[],g.value=[],b.value=!1,e.value=!0,_.value=Date.now(),k.value=!1},toggleAnswer:a=>{if(!N.value)if(D.value.isMultipleChoice){const m=l.value.indexOf(a);m>-1?l.value.splice(m,1):l.value.push(a)}else l.value=[a]},submitAnswer:()=>{if(l.value.length===0)return;b.value=!0,r.value[u.value]=[...l.value];const a=(Date.now()-_.value)/1e3;g.value[u.value]=a},nextQuestion:()=>{u.value<f.value.length-1?(u.value++,l.value=[],b.value=!1,_.value=Date.now()):A.value=!0},previousQuestion:()=>{u.value>0&&(u.value--,l.value=r.value[u.value]??[],b.value=r.value[u.value]!==void 0)},getScoreMessage:()=>C.value>=80?"Excellent! You're ready for the exam!":C.value>=70?"Good job! A bit more study and you'll be ready.":C.value>=50?"Not bad, but you need more practice.":"Keep studying! You'll get there.",resetQuiz:()=>{e.value=!1,A.value=!1,u.value=0,l.value=[],r.value=[],g.value=[],b.value=!1,f.value=[]}};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}}),G={key:0,class:"max-w-2xl mx-auto"},K={class:"card text-center"},H={class:"mb-6"},J=["value"],W={class:"mb-6"},X={class:"mb-8"},Z=["disabled"],$={key:0},ee={key:1},te={key:1,class:"max-w-3xl mx-auto"},se={class:"mb-8"},oe={class:"flex justify-between text-sm text-gray-600 mb-2"},ne={class:"w-full bg-gray-200 rounded-full h-2"},le={class:"card"},re={class:"mb-6"},ie={class:"flex justify-between items-start mb-4"},ae={class:"text-xl font-heading font-semibold text-gray-900"},ue={key:0,class:"ml-2 text-sm text-blue-600 font-normal"},de={class:"flex gap-2"},ce={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},ve={class:"text-gray-700 text-lg"},fe={key:0,class:"text-sm text-blue-600 mt-2"},me={class:"space-y-3 mb-6"},ge=["onClick","disabled"],be={class:"flex items-center"},xe={class:"mr-3 flex-shrink-0"},ye={key:0,class:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},he={key:0,class:"w-2 h-2 bg-white rounded-full"},_e={class:"flex-1"},we={class:"font-medium"},Qe={key:0,class:"ml-3"},pe={key:0,class:"text-green-600"},Ae={key:1,class:"text-red-600"},ke={key:0,class:"p-4 bg-blue-50 rounded-lg border border-blue-200 mb-6"},Ce={class:"text-blue-800"},ze={class:"flex justify-between"},Se={key:0},qe={key:1},Me={key:2,class:"max-w-2xl mx-auto"},je={class:"card text-center"},Pe={class:"mb-6"},De={class:"relative w-32 h-32 mx-auto mb-6"},Ne={class:"w-32 h-32 transform -rotate-90",viewBox:"0 0 36 36"},Te=["stroke-dasharray"],Ie={class:"absolute inset-0 flex items-center justify-center"},Be={class:"text-2xl font-bold text-gray-900"},Le={class:"text-lg text-gray-600 mb-6"},Ve={class:"grid md:grid-cols-3 gap-4 mb-8"},Oe={class:"bg-green-50 p-4 rounded-lg"},Fe={class:"text-2xl font-bold text-green-600"},Ue={class:"bg-red-50 p-4 rounded-lg"},Ye={class:"text-2xl font-bold text-red-600"},Ee={class:"bg-blue-50 p-4 rounded-lg"},Re={class:"text-2xl font-bold text-blue-600"};function Ge(j,s,h,e,A,u){return n(),o("div",null,[e.isQuizStarted?e.isQuizComplete?(n(),o("div",Me,[t("div",je,[t("div",Pe,[t("div",De,[(n(),o("svg",Ne,[s[13]||(s[13]=t("path",{class:"text-gray-200",stroke:"currentColor","stroke-width":"3",fill:"transparent",d:"M18 2.0845 A 15.9155 15.9155 0 0 1 18 33.9155 A 15.9155 15.9155 0 0 1 18 2.0845"},null,-1)),t("path",{class:x(e.scorePercentage>=70?"text-green-500":e.scorePercentage>=50?"text-yellow-500":"text-red-500"),stroke:"currentColor","stroke-width":"3",fill:"transparent","stroke-linecap":"round","stroke-dasharray":`${e.scorePercentage}, 100`,d:"M18 2.0845 A 15.9155 15.9155 0 0 1 18 33.9155 A 15.9155 15.9155 0 0 1 18 2.0845"},null,10,Te)])),t("div",Ie,[t("span",Be,i(Math.round(e.scorePercentage))+"%",1)])]),s[14]||(s[14]=t("h2",{class:"text-3xl font-heading font-bold text-gray-900 mb-4"}," Quiz Complete! ",-1)),t("div",Le,[t("p",null,"You scored "+i(e.correctAnswers)+" out of "+i(e.quizQuestions.length)+" questions",1),t("p",{class:x(e.scorePercentage>=70?"text-green-600":e.scorePercentage>=50?"text-yellow-600":"text-red-600")},i(e.getScoreMessage()),3)])]),t("div",Ve,[t("div",Oe,[t("div",Fe,i(e.correctAnswers),1),s[15]||(s[15]=t("div",{class:"text-sm text-green-700"},"Correct",-1))]),t("div",Ue,[t("div",Ye,i(e.incorrectAnswers),1),s[16]||(s[16]=t("div",{class:"text-sm text-red-700"},"Incorrect",-1))]),t("div",Ee,[t("div",Re,i(Math.round(e.averageTime))+"s",1),s[17]||(s[17]=t("div",{class:"text-sm text-blue-700"},"Avg. Time",-1))])]),t("div",{class:"flex flex-col sm:flex-row gap-4 justify-center"},[t("button",{onClick:e.resetQuiz,class:"btn-primary"}," Take Another Quiz "),s[18]||(s[18]=t("a",{href:"/catalog",class:"btn-secondary"}," Review Q&A Catalog ",-1))])])])):(n(),o("div",te,[t("div",se,[t("div",oe,[t("span",null,"Question "+i(e.currentQuestionIndex+1)+" of "+i(e.quizQuestions.length),1),t("span",null,i(Math.round((e.currentQuestionIndex+1)/e.quizQuestions.length*100))+"% Complete",1)]),t("div",ne,[t("div",{class:"bg-primary h-2 rounded-full transition-all duration-300",style:Y({width:(e.currentQuestionIndex+1)/e.quizQuestions.length*100+"%"})},null,4)])]),t("div",le,[t("div",re,[t("div",ie,[t("h2",ae,[L(i(e.currentQuestion.title)+" ",1),e.currentQuestion.isMultipleChoice?(n(),o("span",ue," (Select Multiple) ")):c("",!0)]),t("div",de,[e.currentQuestion.isMultipleChoice?(n(),o("span",ce,i(e.currentQuestion.correctAnswers.length)+" correct ",1)):c("",!0),t("span",{class:x(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",e.currentQuestion.difficulty==="beginner"?"bg-green-100 text-green-800":e.currentQuestion.difficulty==="intermediate"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},i(e.currentQuestion.difficulty),3)])]),t("p",ve,i(e.currentQuestion.question),1),e.currentQuestion.isMultipleChoice?(n(),o("p",fe," 💡 This question has multiple correct answers. Select all that apply. ")):c("",!0)]),t("div",me,[(n(!0),o(I,null,B(e.currentQuestion.options,(l,r)=>(n(),o("button",{key:r,onClick:_=>e.toggleAnswer(r),disabled:e.isAnswered,class:x(["quiz-option w-full text-left",e.selectedAnswers.includes(r)?"selected":"",e.isAnswered&&e.currentQuestion.correctAnswers.includes(r)?"correct":"",e.isAnswered&&e.selectedAnswers.includes(r)&&!e.currentQuestion.correctAnswers.includes(r)?"incorrect":""])},[t("div",be,[t("div",xe,[e.currentQuestion.isMultipleChoice?(n(),o("div",{key:0,class:x(["w-4 h-4 border-2 rounded flex items-center justify-center",e.selectedAnswers.includes(r)?"bg-blue-500 border-blue-500":"border-gray-300"])},[e.selectedAnswers.includes(r)?(n(),o("svg",ye,s[10]||(s[10]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):c("",!0)],2)):(n(),o("div",{key:1,class:x(["w-4 h-4 border-2 rounded-full flex items-center justify-center",e.selectedAnswers.includes(r)?"bg-blue-500 border-blue-500":"border-gray-300"])},[e.selectedAnswers.includes(r)?(n(),o("div",he)):c("",!0)],2))]),t("div",_e,[t("span",we,i(String.fromCharCode(65+r))+".",1),L(" "+i(l),1)]),e.isAnswered?(n(),o("span",Qe,[e.currentQuestion.correctAnswers.includes(r)?(n(),o("span",pe,"✓")):e.selectedAnswers.includes(r)?(n(),o("span",Ae,"✗")):c("",!0)])):c("",!0)])],10,ge))),128))]),e.isAnswered&&e.currentQuestion.explanation?(n(),o("div",ke,[s[11]||(s[11]=t("h4",{class:"font-medium text-blue-900 mb-2"},"Explanation:",-1)),t("p",Ce,i(e.currentQuestion.explanation),1)])):c("",!0),t("div",ze,[e.currentQuestionIndex>0?(n(),o("button",{key:0,onClick:e.previousQuestion,class:"px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors"}," ← Previous ")):c("",!0),s[12]||(s[12]=t("div",null,null,-1)),!e.isAnswered&&e.selectedAnswers.length>0?(n(),o("button",{key:1,onClick:e.submitAnswer,class:"btn-primary mr-4"}," Submit Answer ")):c("",!0),e.isAnswered?(n(),o("button",{key:2,onClick:e.nextQuestion,class:"btn-primary"},[e.currentQuestionIndex<e.quizQuestions.length-1?(n(),o("span",Se," Next Question → ")):(n(),o("span",qe," Finish Quiz "))])):c("",!0)])])])):(n(),o("div",G,[t("div",K,[s[9]||(s[9]=t("h2",{class:"text-2xl font-heading font-bold text-gray-900 mb-6"}," Choose Your Quiz Settings ",-1)),t("div",H,[s[4]||(s[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Select Category ",-1)),q(t("select",{"onUpdate:modelValue":s[0]||(s[0]=l=>e.selectedCategory=l),class:"block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary focus:border-primary"},[s[3]||(s[3]=t("option",{value:""},"All Categories (Mixed Quiz)",-1)),(n(!0),o(I,null,B(e.props.categories,l=>(n(),o("option",{key:l._id,value:l._id},i(l.name)+" ("+i(l.questionCount||0)+" questions) ",9,J))),128))],512),[[M,e.selectedCategory]])]),t("div",W,[s[6]||(s[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Number of Questions ",-1)),q(t("select",{"onUpdate:modelValue":s[1]||(s[1]=l=>e.numberOfQuestions=l),class:"block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary focus:border-primary"},s[5]||(s[5]=[t("option",{value:"5"},"5 Questions",-1),t("option",{value:"10"},"10 Questions",-1),t("option",{value:"15"},"15 Questions",-1),t("option",{value:"20"},"20 Questions",-1)]),512),[[M,e.numberOfQuestions]])]),t("div",X,[s[8]||(s[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Difficulty Level ",-1)),q(t("select",{"onUpdate:modelValue":s[2]||(s[2]=l=>e.selectedDifficulty=l),class:"block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-primary focus:border-primary"},s[7]||(s[7]=[t("option",{value:""},"All Levels",-1),t("option",{value:"beginner"},"Beginner",-1),t("option",{value:"intermediate"},"Intermediate",-1),t("option",{value:"advanced"},"Advanced",-1)]),512),[[M,e.selectedDifficulty]])]),t("button",{onClick:e.startQuiz,disabled:e.loading,class:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed"},[e.loading?(n(),o("span",$,"Loading...")):(n(),o("span",ee,"Start Quiz"))],8,Z)])]))])}const st=E(R,[["render",Ge]]);export{st as default};
